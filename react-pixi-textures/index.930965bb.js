function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},s=t.parcelRequireedcf;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequireedcf=s),s.register("lQLhs",(function(t,n){var r,s;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>s),(e=>s=e));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},s=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s.register("io0Tf",(function(t,n){e(t.exports,"attach",(()=>i));var r=s("bW9gS");function i(e){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("Can not attach canvas");const t=(null==e?void 0:e.canvas)||(0,r.create)(),n=(null==e?void 0:e.container)||t.parentElement;if(null==n)throw new Error("Must supply a container to attach the canvas to if not already appended");return n.appendChild(t),t.style.display="block",{canvas:t,container:n}}})),s.register("bW9gS",(function(t,n){e(t.exports,"create",(()=>i));var r=s("ckcgQ");function i(e){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("Can not create canvas element");const t=document.createElement("canvas"),n=(null==e?void 0:e.width)??t.width,s=(null==e?void 0:e.height)??t.height;return t.style.userSelect="none",t.onselectstart=()=>!1,(0,r.setCanvasSize)({canvas:t,width:n,height:s}),t}})),s.register("ckcgQ",(function(t,n){function r(e){if("undefined"==typeof window)throw new Error("Can not access window");const t=window.devicePixelRatio;return e.canvas.width=e.width,e.canvas.height=e.height,s({canvas:e.canvas,dpr:t})}function s(e){const t=e.canvas,n=t.width,r=t.height;return t.width=n*e.dpr,t.height=r*e.dpr,t.style.width=n+"px",t.style.height=r+"px",t}e(t.exports,"setCanvasSize",(()=>r)),e(t.exports,"setCanvasDpr",(()=>s))})),s.register("7XNOC",(function(t,n){e(t.exports,"BaseApplication",(()=>u)),e(t.exports,"CtxApplication",(()=>h)),e(t.exports,"withResize",(()=>p)),e(t.exports,"withTick",(()=>f)),e(t.exports,"withInteraction",(()=>v));var r=s("7JkHJ"),i=s("8aGfK"),o=s("ckcgQ"),a=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},c=(e,t,n)=>(a(e,t,"read from private field"),n?n.call(e):t.get(e)),d=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},l=(e,t,n,r)=>(a(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),u=class{constructor(e){this.canvas=e,this._events=new Map,this._disposers=new Set}on(e){const t=(0,r.default)();this._events.has(e.type)||this._events.set(e.type,new Map);const n=this._events.get(e.type);if(null==n)throw new Error(`Can not get event map for ${e.type}`);return n.set(t,e.action),()=>{n.delete(t)}}dispose(){for(let e of this._disposers)e()}},h=class extends u{constructor(e){super(e);const t=(0,i.create)({canvas:this.canvas});if(null==t)throw new Error("Erroring creating context");this.ctx=t}};function p(e){var t;return(t=class extends e{constructor(...e){super(...e),this._events.set(t.mapKey,new Map);const n=new ResizeObserver((e=>{const n=this._events.get(t.mapKey);for(const t of e){const e=t.contentRect;if((0,o.setCanvasSize)({canvas:this.canvas,width:e.width,height:e.height}),null!=n)for(let[t,r]of n)r({app:this,width:e.width,height:e.height});if(this._events.has("tick")){const e=this._events.get("tick");if(null!=e)for(let[t,n]of e)n({dt:0,app:this})}}})),r=this.canvas.parentElement;null!=r&&n.observe(r),this._disposers.add((()=>{n.disconnect()}))}}).mapKey="resize",t}function f(e){var t,n,r,s;return t=class extends e{constructor(...e){super(...e),d(this,n,void 0),d(this,r,void 0),this.isRunning=!1,d(this,s,(()=>{if(!1===this.isRunning)return;const e=this._events.get(t.mapKey);if(null!=e){const t=window.performance.now();for(let[r,s]of e)s({dt:t-c(this,n),app:this});l(this,n,t)}l(this,r,window.requestAnimationFrame(c(this,s)))})),l(this,r,null),l(this,n,window.performance.now()),this._events.set(t.mapKey,new Map),this._disposers.add((()=>{c(this,r)&&window.cancelAnimationFrame(c(this,r))}))}start(){this.isRunning=!0,l(this,n,window.performance.now()),c(this,s).call(this)}stop(){this.isRunning=!1}},n=new WeakMap,r=new WeakMap,s=new WeakMap,t.mapKey="tick",t}function v(e){var t,n,r,s;return s=class extends e{constructor(...e){super(...e),d(this,t,(e=>{const t=this._events.get("pointerdown"),n=window.devicePixelRatio;if(null!=t)for(let[r,s]of t)s({point:{x:e.offsetX*n,y:e.offsetY*n},app:this})})),d(this,n,(e=>{const t=this._events.get("pointerup"),n=window.devicePixelRatio;if(null!=t)for(let[r,s]of t)s({point:{x:e.offsetX*n,y:e.offsetY*n},app:this})})),d(this,r,(e=>{const t=this._events.get("pointermove"),n=window.devicePixelRatio;this.canvas;if(null!=t)for(let[r,s]of t)s({point:{x:e.offsetX*n,y:e.offsetY*n},app:this})})),this._events.set("pointerdown",new Map),this._events.set("pointerup",new Map),this._events.set("pointermove",new Map),this.canvas.addEventListener("pointerdown",c(this,t)),this.canvas.addEventListener("pointerup",c(this,n)),this.canvas.addEventListener("pointermove",c(this,r)),this._disposers.add((()=>{this.canvas.removeEventListener("pointerdown",c(this,t)),this.canvas.removeEventListener("pointerup",c(this,n)),this.canvas.removeEventListener("pointermove",c(this,r))}))}},t=new WeakMap,n=new WeakMap,r=new WeakMap,s}})),s.register("7JkHJ",(function(t,n){e(t.exports,"default",(()=>a));var r=s("aZL8u"),i=s("JzVaU"),o=s("l8li9");var a=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const s=(e=e||{}).random||(e.rng||i.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return(0,o.unsafeStringify)(s)}})),s.register("aZL8u",(function(t,n){e(t.exports,"default",(()=>r));var r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}})),s.register("JzVaU",(function(t,n){let r;e(t.exports,"default",(()=>i));const s=new Uint8Array(16);function i(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}})),s.register("l8li9",(function(t,n){e(t.exports,"unsafeStringify",(()=>i));s("4nOil");const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function i(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}})),s.register("4nOil",(function(t,n){e(t.exports,"default",(()=>i));var r=s("2DDAx");var i=function(e){return"string"==typeof e&&r.default.test(e)}})),s.register("2DDAx",(function(t,n){e(t.exports,"default",(()=>r));var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i})),s.register("8aGfK",(function(t,n){e(t.exports,"create",(()=>i));var r=s("ckcgQ");function i(e){if("undefined"==typeof window||"undefined"==typeof document)return null;const t=(null==e?void 0:e.canvas)??document.createElement("canvas"),n=window.devicePixelRatio,s=t.getContext("2d",(null==e?void 0:e.attributes)??{});return null==s?null:((0,r.setCanvasSize)({canvas:t,width:s.canvas.width,height:s.canvas.height}),s.scale(n,n),s)}})),s("lQLhs").register(JSON.parse('{"ixtt1":"index.930965bb.js","hFe3D":"tiles.39e5b41c.webp","5t8jG":"index.674a1c86.js","awusp":"index.88e90fbc.js"}'));var i=s("fRwNr"),o=s("lx97N"),a=s("eQBmg"),c=(o=s("lx97N"),s("jhfT6")),d=(o=s("lx97N"),s("bIxrZ")),l=(i=s("fRwNr"),(0,o.createContext)(null));function u({children:e,app:t}){const[n,r]=(0,o.useState)(t??null);return(0,i.jsx)(l.Provider,{value:{app:n,setApp:r},children:e})}function h(){const e=(0,o.useContext)(l),t=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(null==e)throw new Error("Sketch attachment must be a child of a sketch provider");if(null!=t&&null!=t.current){if(null==e.app){const n=(0,d.sketch)({canvas:t.current});n.start(),e.setApp(n)}else e.app.start();return()=>{e&&null!=e.app&&e.app.dispose()}}}),[t,e]),(0,i.jsx)("canvas",{ref:t})}function p(){const e=(0,o.useContext)(l);return(null==e?void 0:e.app)??null}o=s("lx97N");class f extends o.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?this.props.fallback:this.props.children}}i=s("fRwNr"),a=s("eQBmg"),o=s("lx97N");let v;var w;(w=v||(v={}))[w.none=0]="none",w[w.pending=1]="pending",w[w.done=2]="done",w[w.error=3]="error";var g;g=new URL("../"+s("lQLhs").resolve("hFe3D"),import.meta.url).toString();const x=new URL(g),m=new class{status=v.none;error=void 0;constructor(e){this.fn=e}async run(){return new Promise((async(e,t)=>{try{e(await this.fn())}catch(e){t(e)}})).then((e=>{this.status=v.done,this.data=e})).catch((e=>{this.status=v.error,this.error=e}))}read(){switch(this.status){case v.none:const e=this.run();throw this.promise=e,this.promise;case v.pending:throw this.promise;case v.error:throw this.error;case v.done:return this.data}}}((async()=>{a.Assets.add("sprites",x.toString(),{scaleMode:a.SCALE_MODES.NEAREST});const e=await a.Assets.load("sprites"),t=new Map;return t.set("wall",new(0,a.Texture)(e.baseTexture,new(0,a.Rectangle)(0,20,10,10))),t.set("blob",new(0,a.Texture)(e.baseTexture,new(0,a.Rectangle)(0,0,10,10))),t})),y=(0,o.createContext)({textures:new Map});function E({children:e}){const t=m.read();return console.log(t),(0,i.jsx)(y.Provider,{value:{textures:t??new Map},children:e})}const b=document.querySelector(".js-app");function _(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)(f,{fallback:(0,i.jsx)("div",{children:"Error"}),children:(0,i.jsx)(E,{children:(0,i.jsx)(u,{children:(0,i.jsx)(R,{children:(0,i.jsx)(k,{})})})})})})}function R({children:e}){return(0,i.jsx)("div",{className:"screen",children:e})}(0,c.createRoot)(b).render((0,i.jsx)(_,{}));let S=0;function k(){const e=p(),t=(0,o.useContext)(y).textures;return(0,o.useEffect)((()=>{if(null==e)return;const n=t.get("blob");if(null==n)return;const r=a.Sprite.from(n),s=[.5*e.canvas.width,.5*e.canvas.height],i=40,o=[s[0]-200,s[1]-200];r.setTransform(o[0],o[1],i,i),e.pixi.stage.addChild(r),e.on({type:"tick",action:({dt:e})=>{S+=e/500,r.setTransform(o[0],o[1]-10*Math.sin(S)*i,i,i)}})}),[e,t]),(0,i.jsx)(h,{})}
//# sourceMappingURL=index.930965bb.js.map
