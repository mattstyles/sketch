function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t,n,r=globalThis,i={},s={},a=r.parcelRequireedcf;null==a&&((a=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){s[e]=t},r.parcelRequireedcf=a);var o=a.register;o("jembK",function(t,n){e(t.exports,"register",()=>r,e=>r=e);var r,i=new Map;r=function(e,t){for(var n=0;n<t.length-1;n+=2)i.set(t[n],{baseUrl:e,path:t[n+1]})}}),o("8dEFu",function(t,n){e(t.exports,"SketchProvider",()=>l),e(t.exports,"SketchAttachment",()=>c),e(t.exports,"useSketchApp",()=>u);// src/index.tsx
var r=a("lx97N"),i=a("bIxrZ"),s=a("fRwNr"),o=/*#__PURE__*/(0,r.createContext)(null);function l({children:e,app:t}){let[n,i]=(0,r.useState)(null!=t?t:null);return/* @__PURE__ */(0,s.jsx)(o.Provider,{value:{app:n,setApp:i},children:e})}function c(){let e=(0,r.useContext)(o),t=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(null==e)throw Error("Sketch attachment must be a child of a sketch provider");if(null!=t&&null!=t.current){if(null==e.app){let n=(0,i.sketch)({canvas:t.current});n.start(),e.setApp(n)}else e.app.start();return()=>{e&&null!=e.app&&e.app.dispose()}}},[t,e]),/* @__PURE__ */(0,s.jsx)("canvas",{ref:t})}function u(){var e;let t=(0,r.useContext)(o);return null!=(e=null==t?void 0:t.app)?e:null}}),o("9UyNl",function(e,t){e.exports=new URL("../tiles.39e5b41c.webp",import.meta.url).toString()}),o("ckcgQ",function(t,n){// src/index.ts
function r(e){if("undefined"==typeof window)throw Error("Can not access window");let t=window.devicePixelRatio;return e.canvas.width=e.width,e.canvas.height=e.height,i({canvas:e.canvas,dpr:t})}function i(e){let t=e.canvas,n=t.width,r=t.height;return t.width=n*e.dpr,t.height=r*e.dpr,t.style.width=n+"px",t.style.height=r+"px",t}e(t.exports,"setCanvasSize",()=>r),e(t.exports,"setCanvasDpr",()=>i)}),o("bW9gS",function(t,n){e(t.exports,"create",()=>i);// src/index.ts
var r=a("ckcgQ");function i(e){var t,n;if("undefined"==typeof window||"undefined"==typeof document)throw Error("Can not create canvas element");let i=document.createElement("canvas"),s=null!=(t=null==e?void 0:e.width)?t:i.width,a=null!=(n=null==e?void 0:e.height)?n:i.height;return i.style.userSelect="none",(0,r.setCanvasSize)({canvas:i,width:s,height:a}),i}}),o("8aGfK",function(t,n){e(t.exports,"create",()=>i);// src/index.ts
var r=a("ckcgQ");function i(e){var t,n;if("undefined"==typeof window||"undefined"==typeof document)return null;let i=null!=(t=null==e?void 0:e.canvas)?t:document.createElement("canvas"),s=window.devicePixelRatio,a=i.getContext("2d",null!=(n=null==e?void 0:e.attributes)?n:{});return null==a?null:((0,r.setCanvasSize)({canvas:i,width:a.canvas.width,height:a.canvas.height}),a.scale(s,s),a)}}),o("io0Tf",function(t,n){e(t.exports,"attach",()=>i);// src/index.ts
var r=a("bW9gS");function i(e){if("undefined"==typeof window||"undefined"==typeof document)throw Error("Can not attach canvas");let t=(null==e?void 0:e.canvas)||(0,r.create)(),n=(null==e?void 0:e.container)||t.parentElement;if(null==n)throw Error("Must supply a container to attach the canvas to if not already appended");return n.appendChild(t),t.style.display="block",{canvas:t,container:n}}}),o("7XNOC",function(t,n){e(t.exports,"BaseApplication",()=>d),e(t.exports,"CtxApplication",()=>p),e(t.exports,"withResize",()=>h),e(t.exports,"withTick",()=>f),e(t.exports,"withInteraction",()=>v);var r=a("k6Cub"),i=a("8aGfK"),s=a("ckcgQ"),o=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},l=(e,t,n)=>(o(e,t,"read from private field"),n?n.call(e):t.get(e)),c=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},u=(e,t,n,r)=>(o(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),d=class{constructor(e){this.canvas=e,this._events=/* @__PURE__ */new Map,this._disposers=/* @__PURE__ */new Set}on(e){let t=(0,r.default)();this._events.has(e.type)||this._events.set(e.type,/* @__PURE__ */new Map);let n=this._events.get(e.type);if(null==n)throw Error(`Can not get event map for ${e.type}`);return n.set(t,e.action),()=>{n.delete(t)}}dispose(){for(let e of this._disposers)e()}},p=class extends d{constructor(e){super(e);let t=(0,i.create)({canvas:this.canvas});if(null==t)throw Error("Erroring creating context");this.ctx=t}};function h(e){var t;return(t=class extends e{constructor(...e){super(...e),this._events.set(t.mapKey,/* @__PURE__ */new Map);let n=new ResizeObserver(e=>{let n=this._events.get(t.mapKey);for(let t of e){let e=t.contentRect;if((0,s.setCanvasSize)({canvas:this.canvas,width:e.width,height:e.height}),null!=n)for(let[t,r]of n)r({app:this,width:e.width,height:e.height});if(this._events.has("tick")){let e=this._events.get("tick");if(null!=e)for(let[t,n]of e)n({dt:0,app:this})}}}),r=this.canvas.parentElement;null!=r&&n.observe(r),this._disposers.add(()=>{n.disconnect()})}}).mapKey="resize",t}// src/mixins/tick.ts
function f(e){var t,n,r,i;return t=class extends e{constructor(...e){super(...e),c(this,n,void 0),c(this,r,void 0),this.isRunning=!1,c(this,i,()=>{if(!1===this.isRunning)return;let e=this._events.get(t.mapKey);if(null!=e){let t=window.performance.now();for(let[r,i]of e)i({dt:t-l(this,n),app:this});u(this,n,t)}u(this,r,window.requestAnimationFrame(l(this,i)))}),u(this,r,null),u(this,n,window.performance.now()),this._events.set(t.mapKey,/* @__PURE__ */new Map),this._disposers.add(()=>{l(this,r)&&window.cancelAnimationFrame(l(this,r))})}start(){this.isRunning=!0,u(this,n,window.performance.now()),l(this,i).call(this)}stop(){this.isRunning=!1}},n=new WeakMap,r=new WeakMap,i=new WeakMap,t.mapKey="tick",t}// src/mixins/interaction.ts
function v(e){var t,n,r,i;return i=class extends e{constructor(...e){super(...e),c(this,t,e=>{let t=this._events.get("pointerdown"),n=window.devicePixelRatio;if(null!=t)for(let[r,i]of t)i({point:{x:e.offsetX*n,y:e.offsetY*n},app:this})}),c(this,n,e=>{let t=this._events.get("pointerup"),n=window.devicePixelRatio;if(null!=t)for(let[r,i]of t)i({point:{x:e.offsetX*n,y:e.offsetY*n},app:this})}),c(this,r,e=>{let t=this._events.get("pointermove"),n=window.devicePixelRatio;if(this.canvas,null!=t)for(let[r,i]of t)i({point:{x:e.offsetX*n,y:e.offsetY*n},app:this})}),this._events.set("pointerdown",/* @__PURE__ */new Map),this._events.set("pointerup",/* @__PURE__ */new Map),this._events.set("pointermove",/* @__PURE__ */new Map),this.canvas.addEventListener("pointerdown",l(this,t)),this.canvas.addEventListener("pointerup",l(this,n)),this.canvas.addEventListener("pointermove",l(this,r)),this._disposers.add(()=>{this.canvas.removeEventListener("pointerdown",l(this,t)),this.canvas.removeEventListener("pointerup",l(this,n)),this.canvas.removeEventListener("pointermove",l(this,r))})}},t=new WeakMap,n=new WeakMap,r=new WeakMap,i}}),o("k6Cub",function(t,n){e(t.exports,"default",()=>o);var r=a("jnvTw"),i=a("iVZpt"),s=a("hlGJx"),o=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return(0,r.default).randomUUID();e=e||{};let a=e.random||(e.rng||(0,i.default))();// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,s.unsafeStringify)(a)}}),o("jnvTw",function(t,n){e(t.exports,"default",()=>i);let r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:r}}),o("iVZpt",function(t,n){let r;e(t.exports,"default",()=>s);let i=new Uint8Array(16);function s(){// lazy load so that environments that need to polyfill have a chance to do so
if(!r&&!// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}}),o("hlGJx",function(t,n){e(t.exports,"unsafeStringify",()=>i),a("8XRGm");/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */let r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function i(e,t=0){// Note: Be careful editing this code!  It's been tuned for performance
// and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}}),o("8XRGm",function(t,n){e(t.exports,"default",()=>i);var r=a("8r5l2"),i=function(e){return"string"==typeof e&&(0,r.default).test(e)}}),o("8r5l2",function(t,n){e(t.exports,"default",()=>r);var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}),a("jembK").register(new URL("",import.meta.url).toString(),JSON.parse('["ixtt1","index.327e3322.js","hFe3D","../tiles.39e5b41c.webp","dgMj5","../pixi-app/index.862a6eda.js","54OWi","../react-app/index.f5731ccd.js"]'));var l=a("fRwNr"),c=a("lx97N"),u=a("eQBmg"),d=a("jhfT6"),p=a("8dEFu"),c=a("lx97N");class h extends c.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?this.props.fallback:this.props.children}constructor(...e){super(...e),this.state={hasError:!1,error:null}}}var l=a("fRwNr"),u=a("eQBmg"),c=a("lx97N");(t=n||(n={}))[t.none=0]="none",t[t.pending=1]="pending",t[t.done=2]="done",t[t.error=3]="error";const f=new URL(a("9UyNl")),v=new class{constructor(e){this.status=0,this.error=void 0,this.fn=e}async run(){return new Promise(async(e,t)=>{try{let t=await this.fn();e(t)}catch(e){t(e)}}).then(e=>{this.status=2,this.data=e}).catch(e=>{this.status=3,this.error=e})}read(){switch(this.status){case 0:let e=this.run();throw this.promise=e,this.promise;case 1:throw this.promise;case 3:throw this.error;case 2:return this.data}}}(async()=>{(0,u.Assets).add("sprites",f.toString(),{scaleMode:u.SCALE_MODES.NEAREST});let e=await (0,u.Assets).load("sprites"),t=new Map;return(// @TODO fix to use a padding buffer in the sprite sheet to avoid rendering artefacts
t.set("wall",new u.Texture(e.baseTexture,new u.Rectangle(0,20,10,10))),t.set("blob",new u.Texture(e.baseTexture,new u.Rectangle(0,0,10,10))),t)}),w=/*#__PURE__*/(0,c.createContext)({textures:new Map});function x({children:e}){let t=v.read();// return children as React.ReactElement
return console.log(t),/*#__PURE__*/(0,l.jsx)(w.Provider,{value:{textures:t??new Map},children:e})}const m=document.querySelector(".js-app"),g=(0,d.createRoot)(m);function y({children:e}){return/*#__PURE__*/(0,l.jsx)("div",{className:"screen",children:e})}g.render(/*#__PURE__*/(0,l.jsx)(function(){return/*#__PURE__*/(0,l.jsx)(c.Suspense,{fallback:/*#__PURE__*/(0,l.jsx)("div",{children:"Loading..."}),children:/*#__PURE__*/(0,l.jsx)(h,{fallback:/*#__PURE__*/(0,l.jsx)("div",{children:"Error"}),children:/*#__PURE__*/(0,l.jsx)(x,{children:/*#__PURE__*/(0,l.jsx)(p.SketchProvider,{children:/*#__PURE__*/(0,l.jsx)(y,{children:/*#__PURE__*/(0,l.jsx)(b,{})})})})})})},{}));let E=0;function b(){let e=(0,p.useSketchApp)(),t=function(){let e=(0,c.useContext)(w);return e.textures}();return(0,c.useEffect)(()=>{if(null==e)return;let n=t.get("blob");if(null==n)return;let r=(0,u.Sprite).from(n),i=[.5*e.canvas.width,.5*e.canvas.height],s=[i[0]-200,i[1]-200];r.setTransform(s[0],s[1],40,40),e.pixi.stage.addChild(r),e.on({type:"tick",action:({dt:e})=>{E+=e/500,r.setTransform(s[0],s[1]-10*Math.sin(E)*40,40,40)}})},[e,t]),/*#__PURE__*/(0,l.jsx)(p.SketchAttachment,{})}//# sourceMappingURL=index.327e3322.js.map

//# sourceMappingURL=index.327e3322.js.map
