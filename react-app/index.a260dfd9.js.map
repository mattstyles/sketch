{"mappings":"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","sources":["apps/examples/pages/react-app/react-app.tsx","packages/sketch-react-app/lib/index.mjs","packages/sketch-canvas-size/lib/index.mjs","packages/sketch-canvas/lib/index.mjs","packages/sketch-attach/lib/index.mjs","node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/native.js","node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/rng.js","node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/stringify.js","node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/v4.js","packages/sketch-application/lib/index.mjs","packages/sketch-loop/lib/index.mjs","packages/sketch-context/lib/index.mjs"],"sourcesContent":["import * as React from 'react'\nimport {useState} from 'react'\nimport type {Application} from 'sketch-react-app'\n\nimport {createRoot} from 'react-dom/client'\nimport {\n  SketchProvider,\n  SketchAttachment,\n  useSketchApp,\n  useSketchTick,\n} from 'sketch-react-app'\n\nconst container = document.querySelector('.js-app') as HTMLElement\nconst root = createRoot(container)\nroot.render(<App />)\n\nfunction App() {\n  return (\n    <SketchProvider>\n      <Container>\n        <Sketch />\n        <Controls />\n      </Container>\n    </SketchProvider>\n  )\n}\n\nfunction Container({children}: {children: React.ReactNode}) {\n  return <div style={{width: '100vw', height: '100vh'}}>{children}</div>\n}\n\nfunction Sketch() {\n  useSketchTick(render)\n  return <SketchAttachment />\n}\n\nfunction Controls() {\n  const app = useSketchApp()\n  const [isRunning, setIsRunning] = useState(true)\n\n  return (\n    <div className='overlay absolute top-right'>\n      <button\n        disabled={app == null}\n        onClick={() => {\n          if (app == null) {\n            return\n          }\n\n          if (isRunning) {\n            app.stop()\n          } else {\n            app.start()\n          }\n\n          setIsRunning(app.isRunning)\n        }}>\n        {isRunning ? 'Pause' : 'Resume'}\n      </button>\n    </div>\n  )\n}\n\nlet time = 0\nfunction render({app, dt}: {app: Application; dt: number}) {\n  time = time + dt / 500\n\n  const padding = 16\n  const gradient = app.ctx.createLinearGradient(\n    0,\n    app.ctx.canvas.height * 0.85,\n    app.ctx.canvas.width,\n    app.ctx.canvas.height * 0.25\n  )\n  gradient.addColorStop(0, '#85ffbd')\n  gradient.addColorStop(1, '#fffb7d')\n  app.ctx.fillStyle = gradient\n  app.ctx.fillRect(\n    0 + padding,\n    0 + padding,\n    app.ctx.canvas.width - padding * 2,\n    app.ctx.canvas.height - padding * 2\n  )\n\n  app.ctx.beginPath()\n  app.ctx.strokeStyle = '#484442'\n  app.ctx.lineWidth = 4\n  app.ctx.arc(\n    app.canvas.width * 0.5,\n    app.canvas.height * 0.5,\n    Math.min(app.canvas.width, app.canvas.height) *\n      0.25 *\n      (1 + Math.sin(time) * 0.2),\n    0,\n    Math.PI * 2\n  )\n  app.ctx.stroke()\n}\n","// src/index.tsx\nimport { createContext, useContext, useEffect, useRef, useState } from \"react\";\nimport { loop } from \"sketch-loop\";\nimport { jsx } from \"react/jsx-runtime\";\nvar applicationContext = createContext(null);\nfunction SketchProvider({ children }) {\n  const [app, setApp] = useState(null);\n  return /* @__PURE__ */ jsx(applicationContext.Provider, {\n    value: {\n      app,\n      setApp\n    },\n    children\n  });\n}\nfunction SketchAttachment() {\n  const ctx = useContext(applicationContext);\n  const canvas = useRef(null);\n  useEffect(() => {\n    if (ctx == null) {\n      throw new Error(\"Sketch attachment must be a child of a sketch provider\");\n    }\n    if (canvas == null || canvas.current == null) {\n      return;\n    }\n    if (ctx.app == null) {\n      const app = loop({ canvas: canvas.current });\n      app.start();\n      ctx.setApp(app);\n    } else {\n      ctx.app.start();\n    }\n    return () => {\n      if (ctx && ctx.app != null) {\n        ctx.app.dispose();\n      }\n    };\n  }, [canvas, ctx]);\n  return /* @__PURE__ */ jsx(\"canvas\", {\n    ref: canvas\n  });\n}\nfunction useSketchApp() {\n  const ctx = useContext(applicationContext);\n  return (ctx == null ? void 0 : ctx.app) ?? null;\n}\nfunction useSketchTick(onTick) {\n  const app = useSketchApp();\n  useEffect(() => {\n    if (app == null) {\n      return;\n    }\n    const unsubscribe = app.on({\n      type: \"tick\",\n      action: onTick\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [onTick, app]);\n}\nexport {\n  SketchAttachment,\n  SketchProvider,\n  useSketchApp,\n  useSketchTick\n};\n","// src/index.ts\nfunction setCanvasSize(opts) {\n  if (typeof window === \"undefined\") {\n    throw new Error(\"Can not access window\");\n  }\n  const dpr = window.devicePixelRatio;\n  opts.canvas.width = opts.width;\n  opts.canvas.height = opts.height;\n  return setCanvasDpr({\n    canvas: opts.canvas,\n    dpr\n  });\n}\nfunction setCanvasDpr(opts) {\n  const canvas = opts.canvas;\n  const width = canvas.width;\n  const height = canvas.height;\n  canvas.width = width * opts.dpr;\n  canvas.height = height * opts.dpr;\n  canvas.style.width = width + \"px\";\n  canvas.style.height = height + \"px\";\n  return canvas;\n}\nexport {\n  setCanvasDpr,\n  setCanvasSize\n};\n","// src/index.ts\nimport { setCanvasSize } from \"sketch-canvas-size\";\nfunction create(opts) {\n  if (typeof window === \"undefined\" || typeof document === \"undefined\") {\n    throw new Error(\"Can not create canvas element\");\n  }\n  const canvas = document.createElement(\"canvas\");\n  const width = (opts == null ? void 0 : opts.width) ?? canvas.width;\n  const height = (opts == null ? void 0 : opts.height) ?? canvas.height;\n  canvas.style.userSelect = \"none\";\n  setCanvasSize({\n    canvas,\n    width,\n    height\n  });\n  return canvas;\n}\nexport {\n  create\n};\n","// src/index.ts\nimport { create } from \"sketch-canvas\";\nfunction attach(opts) {\n  if (typeof window === \"undefined\" || typeof document === \"undefined\") {\n    throw new Error(\"Can not attach canvas\");\n  }\n  const canvas = (opts == null ? void 0 : opts.canvas) || create();\n  const container = (opts == null ? void 0 : opts.container) || canvas.parentElement;\n  if (container == null) {\n    throw new Error(\n      \"Must supply a container to attach the canvas to if not already appended\"\n    );\n  }\n  container.appendChild(canvas);\n  if (container === document.body) {\n    canvas.style.display = \"block\";\n  }\n  return {\n    canvas,\n    container\n  };\n}\nexport {\n  attach\n};\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","var __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\n\n// src/application.ts\nimport { v4 as uuid } from \"uuid\";\nimport { create as createContext } from \"sketch-context\";\nvar BaseApplication = class {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this._events = /* @__PURE__ */ new Map();\n    this._disposers = /* @__PURE__ */ new Set();\n  }\n  on(event) {\n    const id = uuid();\n    if (!this._events.has(event.type)) {\n      this._events.set(event.type, /* @__PURE__ */ new Map());\n    }\n    const map = this._events.get(event.type);\n    if (map == null) {\n      throw new Error(`Can not get event map for ${event.type}`);\n    }\n    map.set(id, event.action);\n    return () => {\n      map.delete(id);\n    };\n  }\n  dispose() {\n    for (let fn of this._disposers) {\n      fn();\n    }\n  }\n};\nvar CtxApplication = class extends BaseApplication {\n  constructor(canvas) {\n    super(canvas);\n    const ctx = createContext({ canvas: this.canvas });\n    if (ctx == null) {\n      throw new Error(\"Erroring creating context\");\n    }\n    this.ctx = ctx;\n  }\n};\n\n// src/mixins/resize.ts\nimport { setCanvasSize } from \"sketch-canvas-size\";\nfunction withResize(Base) {\n  var _a;\n  return _a = class extends Base {\n    constructor(...args) {\n      super(...args);\n      this._events.set(_a.mapKey, /* @__PURE__ */ new Map());\n      const resizeObserver = new ResizeObserver((entries) => {\n        const map = this._events.get(_a.mapKey);\n        for (const entry of entries) {\n          const cr = entry.contentRect;\n          setCanvasSize({\n            canvas: this.canvas,\n            width: cr.width,\n            height: cr.height\n          });\n          if (map != null) {\n            for (let [_, fn] of map) {\n              fn({\n                app: this,\n                width: cr.width,\n                height: cr.height\n              });\n            }\n          }\n          if (this._events.has(\"tick\")) {\n            const m = this._events.get(\"tick\");\n            if (m != null) {\n              for (let [_, fn] of m) {\n                fn({\n                  dt: 0,\n                  app: this\n                });\n              }\n            }\n          }\n        }\n      });\n      const container = this.canvas.parentElement;\n      if (container != null) {\n        resizeObserver.observe(container);\n      }\n      this._disposers.add(() => {\n        resizeObserver.disconnect();\n      });\n    }\n  }, _a.mapKey = \"resize\", _a;\n}\n\n// src/mixins/tick.ts\nfunction withTick(Base) {\n  var _a, _last, _tickID, _tick;\n  return _a = class extends Base {\n    constructor(...args) {\n      super(...args);\n      __privateAdd(this, _last, void 0);\n      __privateAdd(this, _tickID, void 0);\n      this.isRunning = false;\n      __privateAdd(this, _tick, () => {\n        if (this.isRunning === false) {\n          return;\n        }\n        const map = this._events.get(_a.mapKey);\n        if (map != null) {\n          const now = window.performance.now();\n          for (let [_, fn] of map) {\n            fn({\n              dt: now - __privateGet(this, _last),\n              app: this\n            });\n          }\n          __privateSet(this, _last, now);\n        }\n        __privateSet(this, _tickID, window.requestAnimationFrame(__privateGet(this, _tick)));\n      });\n      __privateSet(this, _tickID, null);\n      __privateSet(this, _last, window.performance.now());\n      this._events.set(_a.mapKey, /* @__PURE__ */ new Map());\n      this._disposers.add(() => {\n        if (__privateGet(this, _tickID)) {\n          window.cancelAnimationFrame(__privateGet(this, _tickID));\n        }\n      });\n    }\n    start() {\n      this.isRunning = true;\n      __privateSet(this, _last, window.performance.now());\n      __privateGet(this, _tick).call(this);\n    }\n    stop() {\n      this.isRunning = false;\n    }\n  }, _last = new WeakMap(), _tickID = new WeakMap(), _tick = new WeakMap(), _a.mapKey = \"tick\", _a;\n}\n\n// src/mixins/interaction.ts\nfunction withInteraction(Base) {\n  var _onPointerdown, _onPointerup, _onPointermove, _a;\n  return _a = class extends Base {\n    constructor(...args) {\n      super(...args);\n      __privateAdd(this, _onPointerdown, (event) => {\n        const map = this._events.get(\"pointerdown\");\n        const scale = window.devicePixelRatio;\n        if (map != null) {\n          for (let [_, fn] of map) {\n            fn({\n              point: { x: event.clientX * scale, y: event.clientY * scale },\n              app: this\n            });\n          }\n        }\n      });\n      __privateAdd(this, _onPointerup, (event) => {\n        const map = this._events.get(\"pointerup\");\n        const scale = window.devicePixelRatio;\n        if (map != null) {\n          for (let [_, fn] of map) {\n            fn({\n              point: { x: event.clientX * scale, y: event.clientY * scale },\n              app: this\n            });\n          }\n        }\n      });\n      __privateAdd(this, _onPointermove, (event) => {\n        const map = this._events.get(\"pointermove\");\n        const scale = window.devicePixelRatio;\n        if (map != null) {\n          for (let [_, fn] of map) {\n            fn({\n              point: { x: event.clientX * scale, y: event.clientY * scale },\n              app: this\n            });\n          }\n        }\n      });\n      this._events.set(\"pointerdown\", /* @__PURE__ */ new Map());\n      this._events.set(\"pointerup\", /* @__PURE__ */ new Map());\n      this._events.set(\"pointermove\", /* @__PURE__ */ new Map());\n      this.canvas.addEventListener(\"pointerdown\", __privateGet(this, _onPointerdown));\n      this.canvas.addEventListener(\"pointerup\", __privateGet(this, _onPointerup));\n      this.canvas.addEventListener(\"pointermove\", __privateGet(this, _onPointermove));\n      this._disposers.add(() => {\n        this.canvas.removeEventListener(\"pointerdown\", __privateGet(this, _onPointerdown));\n        this.canvas.removeEventListener(\"pointerup\", __privateGet(this, _onPointerup));\n        this.canvas.removeEventListener(\"pointermove\", __privateGet(this, _onPointermove));\n      });\n    }\n  }, _onPointerdown = new WeakMap(), _onPointerup = new WeakMap(), _onPointermove = new WeakMap(), _a;\n}\nexport {\n  BaseApplication,\n  CtxApplication,\n  withInteraction,\n  withResize,\n  withTick\n};\n","// src/index.ts\nimport { attach } from \"sketch-attach\";\nimport {\n  withTick,\n  withResize,\n  withInteraction,\n  CtxApplication\n} from \"sketch-application\";\nfunction loop(opts) {\n  const { canvas } = attach(opts);\n  return new Application(canvas);\n}\nvar Application = withInteraction(withTick(withResize(CtxApplication)));\nexport {\n  Application,\n  loop\n};\n","// src/index.ts\nimport { setCanvasSize } from \"sketch-canvas-size\";\nfunction create(opts) {\n  if (typeof window === \"undefined\" || typeof document === \"undefined\") {\n    return null;\n  }\n  const canvas = (opts == null ? void 0 : opts.canvas) ?? document.createElement(\"canvas\");\n  const dpr = window.devicePixelRatio;\n  const ctx = canvas.getContext(\"2d\", (opts == null ? void 0 : opts.attributes) ?? {});\n  if (ctx == null) {\n    return null;\n  }\n  setCanvasSize({\n    canvas,\n    width: ctx.canvas.width,\n    height: ctx.canvas.height\n  });\n  ctx.scale(dpr, dpr);\n  return ctx;\n}\nexport {\n  create\n};\n"],"names":["$fRwNr","parcelRequire","$lx97N","$7e6ea443c67680a4$export$e3aebd8246ac72dc","opts","window","Error","dpr","devicePixelRatio","canvas","width","height","style","$7e6ea443c67680a4$export$efd52609a467c022","$86c4614c5abb1ea1$export$185802fd694ee1f5","document","createElement","userSelect","$a9d113484ce60425$export$5ddf9e484e541d6f","container","parentElement","appendChild","body","display","$80142a1f9804d1d0$export$2e2bcd8739ae039","crypto","randomUUID","bind","$089011480f24f94c$var$getRandomValues","$089011480f24f94c$var$rnds8","Uint8Array","$089011480f24f94c$export$2e2bcd8739ae039","getRandomValues","$f62adc69c8e6b48a$var$byteToHex","i","push","toString","slice","$f62adc69c8e6b48a$export$8fb373d660548968","arr","offset","toLowerCase","$5a0ccbd7c13584e0$export$2e2bcd8739ae039","options","buf","rnds","random","rng","$630e86ce1a69e605$var$__accessCheck","obj","member","msg","has","TypeError","$630e86ce1a69e605$var$__privateGet","getter","call","get","$630e86ce1a69e605$var$__privateAdd","value","WeakSet","add","set","$630e86ce1a69e605$var$__privateSet","setter","$630e86ce1a69e605$export$8ea6436d101f2919","constructor","this","_events","Map","_disposers","Set","on","event","id","type","map","action","delete","dispose","fn","$3609002d17f8ee44$export$f9ef67375ddc185","$3609002d17f8ee44$export$16975c34e60e1e61","Base","_a","_onPointerdown","_onPointerup","_onPointermove","args","super","scale","_","point","x","clientX","y","clientY","app","addEventListener","removeEventListener","WeakMap","_last","_tickID","_tick","isRunning","mapKey","now","performance","dt","requestAnimationFrame","cancelAnimationFrame","start","stop","ctx","getContext","attributes","resizeObserver","ResizeObserver","entries","entry","cr","contentRect","m","_1","fn1","observe","disconnect","$047711456d6e6005$var$applicationContext","createContext","$047711456d6e6005$export$d4bf0edbbddc8898","children","setApp","useState","jsx","Provider","$047711456d6e6005$export$eef3e2c8cb25a94","useContext","useRef","useEffect","current","ref","$047711456d6e6005$export$ea7bba1837e9aed6","$047711456d6e6005$export$13cd8a13eebf141f","onTick","unsubscribe","$d37577e24297bce2$var$container","querySelector","$d37577e24297bce2$var$App","jsxs","$d37577e24297bce2$var$Container","$d37577e24297bce2$var$Sketch","$d37577e24297bce2$var$Controls","$d37577e24297bce2$var$render","setIsRunning","className","disabled","onClick","$jhfT6","createRoot","render","$d37577e24297bce2$var$time","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","padding","beginPath","strokeStyle","lineWidth","arc","Math","min","sin","PI","stroke"],"version":3,"file":"index.a260dfd9.js.map"}