var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},i=t.parcelRequireedcf;null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in n){var i=n[t];delete n[t];var o={id:t,exports:{}};return e[t]=o,i.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},t.parcelRequireedcf=i);var o=i("fRwNr");i("lx97N");var s=i("jhfT6"),r=i("lx97N");function a(t){if("undefined"==typeof window)throw new Error("Can not access window");const e=window.devicePixelRatio;return t.canvas.width=t.width,t.canvas.height=t.height,function(t){const e=t.canvas,n=e.width,i=e.height;return e.width=n*t.dpr,e.height=i*t.dpr,e.style.width=n+"px",e.style.height=i+"px",e}({canvas:t.canvas,dpr:e})}function c(t){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("Can not create canvas element");const e=document.createElement("canvas"),n=(null==t?void 0:t.width)??e.width,i=(null==t?void 0:t.height)??e.height;return e.style.userSelect="none",e.onselectstart=()=>!1,a({canvas:e,width:n,height:i}),e}function d(t){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("Can not attach canvas");const e=(null==t?void 0:t.canvas)||c(),n=(null==t?void 0:t.container)||e.parentElement;if(null==n)throw new Error("Must supply a container to attach the canvas to if not already appended");return n.appendChild(e),e.style.display="block",{canvas:e,container:n}}var h={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let p;const l=new Uint8Array(16);function u(){if(!p&&(p="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!p))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p(l)}const f=[];for(let t=0;t<256;++t)f.push((t+256).toString(16).slice(1));function v(t,e=0){return(f[t[e+0]]+f[t[e+1]]+f[t[e+2]]+f[t[e+3]]+"-"+f[t[e+4]]+f[t[e+5]]+"-"+f[t[e+6]]+f[t[e+7]]+"-"+f[t[e+8]]+f[t[e+9]]+"-"+f[t[e+10]]+f[t[e+11]]+f[t[e+12]]+f[t[e+13]]+f[t[e+14]]+f[t[e+15]]).toLowerCase()}var w=function(t,e,n){if(h.randomUUID&&!e&&!t)return h.randomUUID();const i=(t=t||{}).random||(t.rng||u)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return v(i)};var y=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},m=(t,e,n)=>(y(t,e,"read from private field"),n?n.call(t):e.get(t)),g=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},x=(t,e,n,i)=>(y(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),E=class{constructor(t){this.canvas=t,this._events=new Map,this._disposers=new Set}on(t){const e=w();this._events.has(t.type)||this._events.set(t.type,new Map);const n=this._events.get(t.type);if(null==n)throw new Error(`Can not get event map for ${t.type}`);return n.set(e,t.action),()=>{n.delete(e)}}dispose(){for(let t of this._disposers)t()}};function _(t){const{canvas:e}=d(t);return new k(e)}var R,M,k=function(t){var e,n,i,o;return o=class extends t{constructor(...t){super(...t),g(this,e,(t=>{const e=this._events.get("pointerdown"),n=window.devicePixelRatio;if(null!=e)for(let[i,o]of e)o({point:{x:t.offsetX*n,y:t.offsetY*n},app:this})})),g(this,n,(t=>{const e=this._events.get("pointerup"),n=window.devicePixelRatio;if(null!=e)for(let[i,o]of e)o({point:{x:t.offsetX*n,y:t.offsetY*n},app:this})})),g(this,i,(t=>{const e=this._events.get("pointermove"),n=window.devicePixelRatio;this.canvas;if(null!=e)for(let[i,o]of e)o({point:{x:t.offsetX*n,y:t.offsetY*n},app:this})})),this._events.set("pointerdown",new Map),this._events.set("pointerup",new Map),this._events.set("pointermove",new Map),this.canvas.addEventListener("pointerdown",m(this,e)),this.canvas.addEventListener("pointerup",m(this,n)),this.canvas.addEventListener("pointermove",m(this,i)),this._disposers.add((()=>{this.canvas.removeEventListener("pointerdown",m(this,e)),this.canvas.removeEventListener("pointerup",m(this,n)),this.canvas.removeEventListener("pointermove",m(this,i))}))}},e=new WeakMap,n=new WeakMap,i=new WeakMap,o}(function(t){var e,n,i,o;return e=class extends t{constructor(...t){super(...t),g(this,n,void 0),g(this,i,void 0),this.isRunning=!1,g(this,o,(()=>{if(!1===this.isRunning)return;const t=this._events.get(e.mapKey);if(null!=t){const e=window.performance.now();for(let[i,o]of t)o({dt:e-m(this,n),app:this});x(this,n,e)}x(this,i,window.requestAnimationFrame(m(this,o)))})),x(this,i,null),x(this,n,window.performance.now()),this._events.set(e.mapKey,new Map),this._disposers.add((()=>{m(this,i)&&window.cancelAnimationFrame(m(this,i))}))}start(){this.isRunning=!0,x(this,n,window.performance.now()),m(this,o).call(this)}stop(){this.isRunning=!1}},n=new WeakMap,i=new WeakMap,o=new WeakMap,e.mapKey="tick",e}((R=class extends E{constructor(t){super(t);const e=function(t){if("undefined"==typeof window||"undefined"==typeof document)return null;const e=(null==t?void 0:t.canvas)??document.createElement("canvas"),n=window.devicePixelRatio,i=e.getContext("2d",(null==t?void 0:t.attributes)??{});return null==i?null:(a({canvas:e,width:i.canvas.width,height:i.canvas.height}),i.scale(n,n),i)}({canvas:this.canvas});if(null==e)throw new Error("Erroring creating context");this.ctx=e}},(M=class extends R{constructor(...t){super(...t),this._events.set(M.mapKey,new Map);const e=new ResizeObserver((t=>{const e=this._events.get(M.mapKey);for(const n of t){const t=n.contentRect;if(a({canvas:this.canvas,width:t.width,height:t.height}),null!=e)for(let[n,i]of e)i({app:this,width:t.width,height:t.height});if(this._events.has("tick")){const t=this._events.get("tick");if(null!=t)for(let[e,n]of t)n({dt:0,app:this})}}})),n=this.canvas.parentElement;null!=n&&e.observe(n),this._disposers.add((()=>{e.disconnect()}))}}).mapKey="resize",M)));o=i("fRwNr");function b({onTick:t,onResize:e,onInteraction:n}){const i=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(null==i||null==i.current)return;const o=_({canvas:i.current});if(o.on({type:"tick",action:t}),null!=e&&o.on({type:"resize",action:e}),null!=n){let t=function(t){return function(e){null!=n&&n({type:t,...e})}};o.on({type:"pointerdown",action:t("pointerdown")}),o.on({type:"pointermove",action:t("pointermove")}),o.on({type:"pointerup",action:t("pointerup")})}return o.start(),()=>{o.dispose()}}),[i,t,n,e]),(0,o.jsx)("canvas",{ref:i})}const U=document.querySelector(".js-app");function C(){return(0,o.jsx)(j,{children:(0,o.jsx)(b,{onTick:S,onInteraction:I})})}function j({children:t}){return(0,o.jsx)("div",{style:{width:"100vw",height:"100vh"},children:t})}function I({type:t,app:e,point:n}){console.log(t,"::",n,",,")}(0,s.createRoot)(U).render((0,o.jsx)(C,{}));let L=0;function S({app:t,dt:e}){L+=e/500,t.ctx.fillStyle="#232527",t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height),t.ctx.beginPath(),t.ctx.strokeStyle="#ff7034",t.ctx.lineWidth=4,t.ctx.arc(.5*t.canvas.width,.5*t.canvas.height,.25*Math.min(t.canvas.width,t.canvas.height)*(1+.2*Math.sin(L)),0,2*Math.PI),t.ctx.stroke()}
//# sourceMappingURL=index.e54db2e9.js.map
