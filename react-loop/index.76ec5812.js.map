{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,4BCCAC,EAAAD,EAAA,SCAAE,EAAAF,EAAA,S,aAOA,SAASG,EAAKC,GACZ,MAAMC,OAAEA,IAAW,EAAAH,EAAAI,QAAOF,GAE1B,OADY,IAAIG,EAAYF,E,CAG9B,IAAIE,GAAc,EAAAC,EAAAC,kBAChB,EAAAD,EAAAE,WAAS,EAAAF,EAAAG,YAAWH,EAAAI,mB,aDVtB,SAASC,GAAWC,OAAEA,EAAS,aAE7B,MAAMC,GAAM,EAAAd,EAAAe,QAAO,MAiBnB,OAhBA,EAAAf,EAAAgB,YAAU,KACR,GAAW,MAAPF,GAA8B,MAAfA,EAAIG,QACrB,OAEF,MAAMC,EAAMhB,EAAK,CACfE,OAAQU,EAAIG,UAOd,OALAC,EAAIC,GAAG,CACLC,KAAM,OACNC,OAAQR,IAEVK,EAAII,QACG,KACLJ,EAAIK,SAAS,CACd,GACA,CAACT,EAAKD,KACc,EAAAf,EAAA0B,KAAI,SAAU,C,IACnCV,G,CDjBJ,MAAMW,EAAYC,SAASC,cAAc,WAIzC,SAASC,IACP,OACE,EAAA9B,EAAA0B,KAACK,EAAS,C,UACR,EAAA/B,EAAA0B,KAACZ,EAAU,CAACC,OAAQiB,K,CAK1B,SAASD,GAAUE,SAACA,IAClB,OAAO,EAAAjC,EAAA0B,KAAC,MAAG,CAACQ,MAAO,CAACC,MAAO,QAASC,OAAQ,S,SAAWH,G,EAZ5C,EAAAI,EAAAC,YAAWX,GACnBY,QAAO,EAAAvC,EAAA0B,KAACI,EAAG,KAchB,IAAIU,EAAO,EACX,SAASR,GAAOZ,IAACA,EAAGqB,GAAEA,IACpBD,GAAcC,EAAK,IAEnBrB,EAAIsB,IAAIC,UAAY,UACpBvB,EAAIsB,IAAIE,SAAS,EAAG,EAAGxB,EAAId,OAAO6B,MAAOf,EAAId,OAAO8B,QAEpDhB,EAAIsB,IAAIG,YACRzB,EAAIsB,IAAII,YAAc,UACtB1B,EAAIsB,IAAIK,UAAY,EACpB3B,EAAIsB,IAAIM,IACa,GAAnB5B,EAAId,OAAO6B,MACS,GAApBf,EAAId,OAAO8B,OAET,IADFa,KAAKC,IAAI9B,EAAId,OAAO6B,MAAOf,EAAId,OAAO8B,SAEnC,EAAqB,GAAjBa,KAAKE,IAAIX,IAChB,EACU,EAAVS,KAAKG,IAEPhC,EAAIsB,IAAIW,Q","sources":["apps/examples/pages/react-loop/react-loop.tsx","packages/sketch-react-loop/lib/index.mjs","packages/sketch-loop/lib/index.mjs"],"sourcesContent":["import * as React from 'react'\n\nimport type {Props} from 'sketch-react-loop'\n\nimport {createRoot} from 'react-dom/client'\nimport {SketchLoop} from 'sketch-react-loop'\n\nconst container = document.querySelector('.js-app') as HTMLElement\nconst root = createRoot(container)\nroot.render(<App />)\n\nfunction App() {\n  return (\n    <Container>\n      <SketchLoop onTick={render} />\n    </Container>\n  )\n}\n\nfunction Container({children}: {children: React.ReactNode}) {\n  return <div style={{width: '100vw', height: '100vh'}}>{children}</div>\n}\n\nlet time = 0\nfunction render({app, dt}: Parameters<Props['onTick']>[0]) {\n  time = time + dt / 500\n\n  app.ctx.fillStyle = '#232527'\n  app.ctx.fillRect(0, 0, app.canvas.width, app.canvas.height)\n\n  app.ctx.beginPath()\n  app.ctx.strokeStyle = '#ff7034'\n  app.ctx.lineWidth = 4\n  app.ctx.arc(\n    app.canvas.width * 0.5,\n    app.canvas.height * 0.5,\n    Math.min(app.canvas.width, app.canvas.height) *\n      0.25 *\n      (1 + Math.sin(time) * 0.2),\n    0,\n    Math.PI * 2\n  )\n  app.ctx.stroke()\n}\n","// src/index.tsx\nimport { useEffect, useRef } from \"react\";\nimport { loop } from \"sketch-loop\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction SketchLoop({ onTick = ({}) => {\n} }) {\n  const ref = useRef(null);\n  useEffect(() => {\n    if (ref == null || ref.current == null) {\n      return;\n    }\n    const app = loop({\n      canvas: ref.current\n    });\n    app.on({\n      type: \"tick\",\n      action: onTick\n    });\n    app.start();\n    return () => {\n      app.dispose();\n    };\n  }, [ref, onTick]);\n  return /* @__PURE__ */ jsx(\"canvas\", {\n    ref\n  });\n}\nexport {\n  SketchLoop\n};\n","// src/index.ts\nimport { attach } from \"sketch-attach\";\nimport {\n  withTick,\n  withResize,\n  withInteraction,\n  BaseApplication\n} from \"sketch-application\";\nfunction loop(opts) {\n  const { canvas } = attach(opts);\n  const app = new Application(canvas);\n  return app;\n}\nvar Application = withInteraction(\n  withTick(withResize(BaseApplication))\n);\nexport {\n  Application,\n  loop\n};\n"],"names":["$fRwNr","parcelRequire","$lx97N","$io0Tf","$3609002d17f8ee44$export$f9ef67375ddc185","opts","canvas","attach","$3609002d17f8ee44$export$16975c34e60e1e61","$7XNOC","withInteraction","withTick","withResize","BaseApplication","$74a6186c2933c974$export$be0ed50280534f10","onTick","ref","useRef","useEffect","current","app","on","type","action","start","dispose","jsx","$94b15146450e2cf8$var$container","document","querySelector","$94b15146450e2cf8$var$App","$94b15146450e2cf8$var$Container","$94b15146450e2cf8$var$render","children","style","width","height","$jhfT6","createRoot","render","$94b15146450e2cf8$var$time","dt","ctx","fillStyle","fillRect","beginPath","strokeStyle","lineWidth","arc","Math","min","sin","PI","stroke"],"version":3,"file":"index.76ec5812.js.map"}