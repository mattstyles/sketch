{"mappings":"oeACA,IAAAA,EAAAC,EAAA,S,aAYA,IAAIC,GAAc,EAAAC,EAAAC,kBAChB,EAAAD,EAAAE,WAAS,EAAAF,EAAAG,YAAWH,EAAAI,mBCZtB,MAAMC,EDMN,SAAcC,GACZ,MAAMC,OAAEA,IAAW,EAAAV,EAAAW,QAAOF,GAE1B,OADY,IAAIP,EAAYQ,E,CCRlB,CAAK,CAACE,UAAWC,SAASC,OAEtC,SAASC,IACP,MAAMC,EAAWR,EAAIS,IAAIC,qBACvB,EACwB,IAAxBV,EAAIS,IAAIP,OAAOS,OACfX,EAAIS,IAAIP,OAAOU,MACS,IAAxBZ,EAAIS,IAAIP,OAAOS,QAEjBH,EAASK,aAAa,EAAG,WACzBL,EAASK,aAAa,EAAG,WACzBb,EAAIS,IAAIK,UAAYN,EACpBR,EAAIS,IAAIM,SAAS,EAAG,EAAGf,EAAIS,IAAIP,OAAOU,MAAOZ,EAAIS,IAAIP,OAAOS,QAE5D,IAAK,IAAIK,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,MACMC,EAD2D,IAAhDC,KAAKC,IAAInB,EAAIE,OAAOU,MAAOZ,EAAIE,OAAOS,QAC/BS,EACxBpB,EAAIS,IAAIY,YACRrB,EAAIS,IAAIa,YAAc,uBAAuB,EAAIN,EAAI,KACrDhB,EAAIS,IAAIc,UAAY,EAAkB,GAAb,EAAIP,EAAI,GACjChB,EAAIS,IAAIe,IACa,GAAnBxB,EAAIE,OAAOU,MACS,GAApBZ,EAAIE,OAAOS,OACXM,EAAOD,GAAY,IAAPC,GACZ,EACU,EAAVC,KAAKO,IAEPzB,EAAIS,IAAIiB,Q,EAIZ,IAAIN,EAAa,EACbO,EAAO,EACX3B,EAAI4B,GAAG,CACLC,KAAM,SACNC,OAAQvB,IAEVP,EAAI4B,GAAG,CACLC,KAAM,OACNC,OAAQ,EAACC,GAACA,MACRJ,GAAcI,EAAK,IACnBX,EAAa,EAAqB,IAAjBF,KAAKc,IAAIL,EAAY,IAG1C3B,EAAI4B,GAAG,CACLC,KAAM,OACNC,OAAQvB,IAEV,MAAM0B,EAAY5B,SAAS6B,cAAc,eACnCC,EAAW9B,SAAS6B,cAAc,iBAClCE,EAAW/B,SAAS6B,cAAc,iBACxClC,EAAI4B,GAAG,CACLC,KAAM,cACNC,OAAQ,EAACO,MAACA,MAERJ,EAAUK,UAAY,MAAM,IAGhCtC,EAAI4B,GAAG,CACLC,KAAM,YACNC,OAAQ,EAACO,MAACA,MAERJ,EAAUK,UAAY,IAAI,IAG9BtC,EAAI4B,GAAG,CACLC,KAAM,cACNC,OAAQ,EAACO,MAACA,MAERF,EAASG,UAAYD,EAAME,EAAEC,QAAQ,GACrCJ,EAASE,UAAYD,EAAMI,EAAED,QAAQ,EAAE,IAI3CxC,EAAI0C,QAEJC,OAAOC,iBAAiB,WAAYC,IAClC,OAAQA,EAAMC,KACZ,IAAK,IACHC,QAAQC,IAAI,aACZhD,EAAIiD,UACJ,MACF,IAAK,IACHF,QAAQC,IAAI,YACZhD,EAAI0C,QACJ,MACF,IAAK,IACHK,QAAQC,IAAI,WACZhD,EAAIkD,O","sources":["packages/sketch-loop/lib/index.mjs","apps/examples/pages/loop/loop.ts"],"sourcesContent":["// src/index.ts\nimport { attach } from \"sketch-attach\";\nimport {\n  withTick,\n  withResize,\n  withInteraction,\n  BaseApplication\n} from \"sketch-application\";\nfunction loop(opts) {\n  const { canvas } = attach(opts);\n  const app = new Application(canvas);\n  return app;\n}\nvar Application = withInteraction(\n  withTick(withResize(BaseApplication))\n);\nexport {\n  Application,\n  loop\n};\n","import {loop} from 'sketch-loop'\n\nconst app = loop({container: document.body})\n\nfunction render() {\n  const gradient = app.ctx.createLinearGradient(\n    0,\n    app.ctx.canvas.height * 0.85,\n    app.ctx.canvas.width,\n    app.ctx.canvas.height * 0.25\n  )\n  gradient.addColorStop(0, '#fbab7e')\n  gradient.addColorStop(1, '#f7ce68')\n  app.ctx.fillStyle = gradient\n  app.ctx.fillRect(0, 0, app.ctx.canvas.width, app.ctx.canvas.height)\n\n  for (let i = 0; i <= 8; i++) {\n    const baseSize = Math.min(app.canvas.width, app.canvas.height) * 0.25\n    const size = baseSize * sizeFactor\n    app.ctx.beginPath()\n    app.ctx.strokeStyle = `rgba(255, 250, 248, ${1 - i / 9})`\n    app.ctx.lineWidth = 4 + (1 - i / 8) * 4\n    app.ctx.arc(\n      app.canvas.width * 0.5,\n      app.canvas.height * 0.5,\n      size - i * (size * 0.05),\n      0,\n      Math.PI * 2\n    )\n    app.ctx.stroke()\n  }\n}\n\nlet sizeFactor = 1\nlet time = 0\napp.on({\n  type: 'resize',\n  action: render,\n})\napp.on({\n  type: 'tick',\n  action: ({dt}) => {\n    time = time + dt / 500\n    sizeFactor = 1 + Math.sin(time) * 0.35\n  },\n})\napp.on({\n  type: 'tick',\n  action: render,\n})\nconst pointerEl = document.querySelector('.js-pointer') as HTMLElement\nconst pointerX = document.querySelector('.js-pointer-x') as HTMLElement\nconst pointerY = document.querySelector('.js-pointer-y') as HTMLElement\napp.on({\n  type: 'pointerdown',\n  action: ({point}) => {\n    // console.log('pointer down', point)\n    pointerEl.innerHTML = 'down'\n  },\n})\napp.on({\n  type: 'pointerup',\n  action: ({point}) => {\n    // console.log('pointer up', point)\n    pointerEl.innerHTML = 'up'\n  },\n})\napp.on({\n  type: 'pointermove',\n  action: ({point}) => {\n    // console.log('pointer move', point)\n    pointerX.innerHTML = point.x.toFixed(2)\n    pointerY.innerHTML = point.y.toFixed(2)\n  },\n})\n\napp.start()\n\nwindow.addEventListener('keydown', (event) => {\n  switch (event.key) {\n    case 'd':\n      console.log('disposing')\n      app.dispose()\n      break\n    case 's':\n      console.log('starting')\n      app.start()\n      break\n    case 'p':\n      console.log('pausing')\n      app.stop()\n      break\n  }\n})\n"],"names":["$io0Tf","parcelRequire","$3609002d17f8ee44$export$16975c34e60e1e61","$7XNOC","withInteraction","withTick","withResize","BaseApplication","$455b3c24f3c9a427$var$app","opts","canvas","attach","container","document","body","$455b3c24f3c9a427$var$render","gradient","ctx","createLinearGradient","height","width","addColorStop","fillStyle","fillRect","i","size","Math","min","$455b3c24f3c9a427$var$sizeFactor","beginPath","strokeStyle","lineWidth","arc","PI","stroke","$455b3c24f3c9a427$var$time","on","type","action","dt","sin","$455b3c24f3c9a427$var$pointerEl","querySelector","$455b3c24f3c9a427$var$pointerX","$455b3c24f3c9a427$var$pointerY","point","innerHTML","x","toFixed","y","start","window","addEventListener","event","key","console","log","dispose","stop"],"version":3,"file":"index.8da143d9.js.map"}