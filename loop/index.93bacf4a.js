function t(t){if("undefined"==typeof window)throw new Error("Can not access window");const e=window.devicePixelRatio;return t.canvas.width=t.width,t.canvas.height=t.height,function(t){const e=t.canvas,n=e.width,i=e.height;return e.width=n*t.dpr,e.height=i*t.dpr,e.style.width=n+"px",e.style.height=i+"px",e}({canvas:t.canvas,dpr:e})}function e(e){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("Can not create canvas element");const n=document.createElement("canvas"),i=(null==e?void 0:e.width)??n.width,o=(null==e?void 0:e.height)??n.height;return n.style.userSelect="none",n.onselectstart=()=>!1,t({canvas:n,width:i,height:o}),n}function n(t){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("Can not attach canvas");const n=(null==t?void 0:t.canvas)||e(),i=(null==t?void 0:t.container)||n.parentElement;if(null==i)throw new Error("Must supply a container to attach the canvas to if not already appended");return i.appendChild(n),n.style.display="block",{canvas:n,container:i}}var i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const s=new Uint8Array(16);function a(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(s)}const r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));function c(t,e=0){return(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase()}var d=function(t,e,n){if(i.randomUUID&&!e&&!t)return i.randomUUID();const o=(t=t||{}).random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=o[t];return e}return c(o)};var h=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},p=(t,e,n)=>(h(t,e,"read from private field"),n?n.call(t):e.get(t)),l=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},u=(t,e,n,i)=>(h(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),f=class{constructor(t){this.canvas=t,this._events=new Map,this._disposers=new Set}on(t){const e=d();this._events.has(t.type)||this._events.set(t.type,new Map);const n=this._events.get(t.type);if(null==n)throw new Error(`Can not get event map for ${t.type}`);return n.set(e,t.action),()=>{n.delete(e)}}dispose(){for(let t of this._disposers)t()}};var v,w,y=function(t){var e,n,i,o;return o=class extends t{constructor(...t){super(...t),l(this,e,(t=>{const e=this._events.get("pointerdown"),n=window.devicePixelRatio;if(null!=e)for(let[i,o]of e)o({point:{x:t.offsetX*n,y:t.offsetY*n},app:this})})),l(this,n,(t=>{const e=this._events.get("pointerup"),n=window.devicePixelRatio;if(null!=e)for(let[i,o]of e)o({point:{x:t.offsetX*n,y:t.offsetY*n},app:this})})),l(this,i,(t=>{const e=this._events.get("pointermove"),n=window.devicePixelRatio;this.canvas;if(null!=e)for(let[i,o]of e)o({point:{x:t.offsetX*n,y:t.offsetY*n},app:this})})),this._events.set("pointerdown",new Map),this._events.set("pointerup",new Map),this._events.set("pointermove",new Map),this.canvas.addEventListener("pointerdown",p(this,e)),this.canvas.addEventListener("pointerup",p(this,n)),this.canvas.addEventListener("pointermove",p(this,i)),this._disposers.add((()=>{this.canvas.removeEventListener("pointerdown",p(this,e)),this.canvas.removeEventListener("pointerup",p(this,n)),this.canvas.removeEventListener("pointermove",p(this,i))}))}},e=new WeakMap,n=new WeakMap,i=new WeakMap,o}(function(t){var e,n,i,o;return e=class extends t{constructor(...t){super(...t),l(this,n,void 0),l(this,i,void 0),this.isRunning=!1,l(this,o,(()=>{if(!1===this.isRunning)return;const t=this._events.get(e.mapKey);if(null!=t){const e=window.performance.now();for(let[i,o]of t)o({dt:e-p(this,n),app:this});u(this,n,e)}u(this,i,window.requestAnimationFrame(p(this,o)))})),u(this,i,null),u(this,n,window.performance.now()),this._events.set(e.mapKey,new Map),this._disposers.add((()=>{p(this,i)&&window.cancelAnimationFrame(p(this,i))}))}start(){this.isRunning=!0,u(this,n,window.performance.now()),p(this,o).call(this)}stop(){this.isRunning=!1}},n=new WeakMap,i=new WeakMap,o=new WeakMap,e.mapKey="tick",e}((v=class extends f{constructor(e){super(e);const n=function(e){if("undefined"==typeof window||"undefined"==typeof document)return null;const n=(null==e?void 0:e.canvas)??document.createElement("canvas"),i=window.devicePixelRatio,o=n.getContext("2d",(null==e?void 0:e.attributes)??{});return null==o?null:(t({canvas:n,width:o.canvas.width,height:o.canvas.height}),o.scale(i,i),o)}({canvas:this.canvas});if(null==n)throw new Error("Erroring creating context");this.ctx=n}},(w=class extends v{constructor(...e){super(...e),this._events.set(w.mapKey,new Map);const n=new ResizeObserver((e=>{const n=this._events.get(w.mapKey);for(const i of e){const e=i.contentRect;if(t({canvas:this.canvas,width:e.width,height:e.height}),null!=n)for(let[t,i]of n)i({app:this,width:e.width,height:e.height});if(this._events.has("tick")){const t=this._events.get("tick");if(null!=t)for(let[e,n]of t)n({dt:0,app:this})}}})),i=this.canvas.parentElement;null!=i&&n.observe(i),this._disposers.add((()=>{n.disconnect()}))}}).mapKey="resize",w)));const m=function(t){const{canvas:e}=n(t);return new y(e)}({container:document.body}),g=({app:t})=>{const e=t.ctx.createLinearGradient(0,.85*t.ctx.canvas.height,t.ctx.canvas.width,.25*t.ctx.canvas.height);e.addColorStop(0,"#fbab7e"),e.addColorStop(1,"#f7ce68"),t.ctx.fillStyle=e,t.ctx.fillRect(0,0,t.ctx.canvas.width,t.ctx.canvas.height);for(let e=0;e<=8;e++){const n=.25*Math.min(t.canvas.width,t.canvas.height)*x;t.ctx.beginPath(),t.ctx.strokeStyle=`rgba(255, 250, 248, ${1-e/9})`,t.ctx.lineWidth=4+4*(1-e/8),t.ctx.arc(.5*t.canvas.width,.5*t.canvas.height,n-e*(.05*n),0,2*Math.PI),t.ctx.stroke()}t.ctx.beginPath(),t.ctx.fillStyle="#fff",t.ctx.arc(E,_,20,0,2*Math.PI),t.ctx.fill()};let x=1,M=0,E=0,_=0;m.on({type:"resize",action:g}),m.on({type:"tick",action:({dt:t})=>{M+=t/500,x=1+.35*Math.sin(M)}}),m.on({type:"tick",action:g});const k=document.querySelector(".js-pointer"),b=document.querySelector(".js-pointer-x"),R=document.querySelector(".js-pointer-y");m.on({type:"pointerdown",action:({point:t})=>{k.innerHTML="down"}}),m.on({type:"pointerup",action:({point:t})=>{k.innerHTML="up"}}),m.on({type:"pointermove",action:({point:t})=>{b.innerHTML=t.x.toFixed(2),R.innerHTML=t.y.toFixed(2),E=t.x,_=t.y}}),m.start(),window.addEventListener("keydown",(t=>{switch(t.key){case"d":console.log("disposing"),m.dispose();break;case"s":console.log("starting"),m.start();break;case"p":console.log("pausing"),m.stop()}}));
//# sourceMappingURL=index.93bacf4a.js.map
